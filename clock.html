<DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="UTF-8">
        <title>羅盤時鐘</title>
        <link rel="stylesheet" href="./clock.css">
        <script src="clock.js"></script>

        <style>
            * {
                margin: 0;
                padding: 0;
                background: black;

            }

            html,
            body {
                width: 100%;
                height: 100%;
                overflow: hidden;
            }

            #clock {
                position: relative;
                width: 90%;
                height: 90%;
                text-align: justify;
            }

            .label {
                display: inline-block;
                text-align: justify;
                padding: 10px 15px;               
                font-size: 16px;
                font-family:微軟正黑體;
                transition: left 1s, top 1s; 
                transform-origin: 0 0;
                /* color :#9999CC; */
            }

          
        </style>

    </head>

    <body>

        <div id="clock"></div>
        <script>
            let monthText = ["　一月", "　二月", "　三月", "　四月", "　五月", "　六月", "　七月", "　八月", "　九月", "　十月", "十一月", "十二月"];
            let dayText = ["　　一號", "　　二號", "　　三號", "　　四號", "　　五號", "　　六號", "　　七號", "　　八號", "　　九號", "　　十號", 
                        "　十一號","　十二號", "　十三號", "　十四號", "　十五號","　十六號", "　十七號", "　十八號", "　十九號", " 　二十號", "二十一號", "二十二號",
                          "二十三號", "二十四號", "二十五號","二十六號", "二十七號", "二十八號", "二十九號", "　三十號", "三十一號"];
            let weekText = ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"];
            let hourText = ["　零點", "　一點", "　两點", "　三點", "　四點", "　五點", "　六點", "　七點", "　八點", "　九點", "　十點", "十一點", "十二點", 
                            "十三點", "十四點", "十五點", "十六點", "十七點", "十八點", "十九點", "二十點", "二十一點", "二十二點", "二十三點"];
            let minuteText = ["　　一分", "　　二分", "　　三分", "　　四分", "　　五分", "　　六分", "　　七分", "　　八分", "　　九分", "　　十分",
                "　十一分", "　十二分", "　十三分", "　十四分", "　十五分", "　十六分", "　十七分", "　十八分", "　十九分", "　二十分",
                "二十一分", "二十二分", "二十三分", "二十四分", "二十五分", "二十六分", "二十七分", "二十八分", "二十九分", "　三十分",
                "三十一分", "三十二分", "三十三分", "三十四分", "三十五分", "三十六分", "三十七分", "三十八分", "三十九分", "　四十分",
                "四十一分", "四十二分", "四十三分", "四十四分", "四十五分", "四十六分", "四十七分", "四十八分", "四十九分", "　五十分",
                "五十一分", "五十二分", "五十三分", "五十四分", "五十五分", "五十六分", "五十七分", "五十八分", "五十九分", "　六十分"];
            let secondText = ["　　一秒", "　　二秒", "　　三秒", "　　四秒", "　　五秒", "　　六秒", "　　七秒", "　　八秒", "　　九秒", "　　十秒",
                "　十一秒", "　十二秒", "　十三秒", "　十四秒", "　十五秒", "　十六秒", "　十七秒", "　十八秒", "　十九秒", "　二十秒",
                "二十一秒", "二十二秒", "二十三秒", "二十四秒", "二十五秒", "二十六秒", "二十七秒", "二十八秒", "二十九秒", "　三十秒",
                "三十一秒", "三十二秒", "三十三秒", "三十四秒", "三十五秒", "三十六秒", "三十七秒", "三十八秒", "三十九秒", "　四十秒",
                "四十一秒", "四十二秒", "四十三秒", "四十四秒", "四十五秒", "四十六秒", "四十七秒", "四十八秒", "四十九秒", "　五十秒",
                "五十一秒", "五十二秒", "五十三秒", "五十四秒", "五十五秒", "五十六秒", "五十七秒", "五十八秒", "五十九秒", "　六十秒"];
        </script>

        <script>
            // 存放元素list
            let monthList = [];
            let dayList = [];
            let weekList = [];
            let hourList = [];
            let minuteList = [];
            let secondList = [];

            //二维list 存放文字内容及頁面顯示
            let timeTextSet = [
                [monthText, monthList],
                [dayText, dayList],
                [weekText, weekList],
                [hourText, hourList],
                [minuteText, minuteList],
                [secondText, secondList]
            ];

            // 判斷是否為旋轉頁面
            let isRotating = false;
            //時鐘頁面
            let clock;

            // 初始化函數
            function init() {
                clock = document.getElementById('clock');
                // 存放文字
                for (let i = 0; i < timeTextSet.length; i++) {
                    for (let j = 0; j < timeTextSet[i][0].length; j++) {
                        let temp = createLabel(timeTextSet[i][0][j]);
                        clock.appendChild(temp);
                        // 将文字放到list中
                        timeTextSet[i][1].push(temp);
                    }
                }

            }
            // 旋轉之前抓到當前時間
            function locateCurrent() {
                for (let i = 0; i < timeTextSet.length; i++) {
                    for (let j = 0; j < timeTextSet[i][1].length; j++) {
                        // 獲取原来的位置  再修改position 设置left top
                        let tempX = timeTextSet[i][1][j].offsetLeft + "px";
                        let tempY = timeTextSet[i][1][j].offsetTop + "px";
                        // console.log(timeTextSet[i][1][j]);
                        // 利用let 防止闭包
                        setTimeout(function () {
                            timeTextSet[i][1][j].style.position = "absolute";
                            timeTextSet[i][1][j].style.left = tempX;
                            timeTextSet[i][1][j].style.top = tempY;
                        }, 50);
                    }
                }
            }

            function toRotate() {
                isRotating = true;
                clock.style.transform = "rotate(90deg)";
            }

            //頁面抓取時間完成後變成圓形時鐘
            window.onload = function () {

                init();
                // 每隔0.1秒取得當前時間 
                setInterval(function () {
                    runTime();
                }, 100);

                locateCurrent();

                // 變成旋轉樣式
                setTimeout(function () {
                    toRotate();
                });
               
            }

            // 將文字填入list
            function createLabel(text) {
                let div = document.createElement('div');
                div.classList.add('label');
                div.innerText = text;
                return div;
            }

            //變成旋轉時鐘
            function runTime() {
                //當前時間獲取
                let now = new Date();
                let month = now.getMonth();
                let day = now.getDate();
                let week = now.getDay();
                let hour = now.getHours();
                let minute = now.getMinutes();
                let seconds = now.getSeconds();

                // 初始化時間 並改顏色
                // initStyle();
                let label = document.getElementsByClassName('label');
                for (let i = 0; i < label.length; i++) {                                       
                    label[i].style.color = '#9999CC';

                    
                  

                }

                // 將當前時間月份存放在list
                let nowValue = [month, day - 1, week, hour, minute, seconds];                
                for (let i = 0; i < nowValue.length; i++) {
                    let num = nowValue[i];
                    timeTextSet[i][1][num]; 

                    setInterval(function st() {                                                           
                        timeTextSet[i][1][num].style.color = 'red'; 
                     },5000),clearInterval(function (){
                        clearInterval(st);
                    },6000);                   

                }
                

                

                // 變成時鐘
                if (isRotating) {
                    // 圆心位置確定
                    let widthMid = document.body.clientWidth / 2;
                    let heightMid = document.body.clientHeight / 2;
                    // 將元素確定到圆的位置
                    for (let i = 0; i < timeTextSet.length; i++) {
                        for (let j = 0; j < timeTextSet[i][0].length; j++) {
                            // 计算出每一個元素的位置  x y 座標，圆的半徑與時分秒的位置有關
                            let r = (i + 1) * 35 + 50 * i;
                            // 計算每一個平均的角度  將每一個單位對齊,再轉化成弧度
                            let deg = 360 / timeTextSet[i][1].length * (j - nowValue[i]);
                            // 計算元素的座標
                            let x = r * Math.sin(deg * Math.PI / 180) + widthMid;
                            let y = heightMid - r * Math.cos(deg * Math.PI / 180);
                            // 樣式
                            let temp = timeTextSet[i][1][j];
                            temp.style.transform = 'rotate(' + (-90 + deg) + 'deg)';
                            temp.style.left = x + 'px';
                            temp.style.top = y + 'px';
                        }
                        
                    }
                }
            
                
            }

            function initStyle() {
                // 將所有文字設置顏色
                let label = document.getElementsByClassName('label');
                for (let i = 0; i < label.length; i++) {
                    label[i].style.color = '#C07AB8';
                    
                }
                
            }

           

        </script>

    </body>

    </html>